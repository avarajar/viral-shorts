<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Shorts - Automated Content Publishing</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #e0e0e0; background: #0a0a0a; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; padding: 0 24px; }
        header { padding: 60px 0 40px; text-align: center; border-bottom: 1px solid #1a1a1a; }
        header h1 { font-size: 2.4rem; color: #fff; margin-bottom: 12px; }
        header p { font-size: 1.1rem; color: #888; max-width: 500px; margin: 0 auto; }
        nav { display: flex; justify-content: center; gap: 24px; padding: 20px 0; border-bottom: 1px solid #1a1a1a; }
        nav a { color: #888; text-decoration: none; font-size: 0.9rem; cursor: pointer; }
        nav a:hover { color: #fff; }
        nav a.active { color: #fff; }
        section { padding: 48px 0; border-bottom: 1px solid #1a1a1a; }
        section:last-child { border-bottom: none; }
        h2 { font-size: 1.5rem; color: #fff; margin-bottom: 20px; }
        h3 { font-size: 1.1rem; color: #ccc; margin: 24px 0 10px; }
        p, li { color: #aaa; margin-bottom: 12px; }
        ul { padding-left: 20px; }
        li { margin-bottom: 8px; }
        a { color: #6ea8fe; }
        footer { padding: 32px 0; text-align: center; }
        footer p { font-size: 0.85rem; color: #555; }
        @media (max-width: 600px) { header h1 { font-size: 1.8rem; } }

        /* ─── App / Dashboard ─────────────────────────────── */
        .page { display: none; }
        .page.active { display: block; }

        .app-card {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
        }
        .app-card h3 { margin-top: 0; color: #fff; font-size: 1.1rem; }

        .platform-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #1a1a1a;
        }
        .platform-row:last-child { border-bottom: none; }
        .platform-info { display: flex; align-items: center; gap: 14px; }
        .platform-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 700;
            color: #fff;
        }
        .platform-icon.tiktok { background: #111; border: 1px solid #333; }
        .platform-icon.youtube { background: #c4302b; }
        .platform-icon.instagram { background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .platform-name { font-size: 1rem; color: #fff; font-weight: 500; }
        .platform-status { font-size: 0.85rem; color: #666; }

        .btn {
            display: inline-block;
            padding: 10px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: opacity 0.2s;
        }
        .btn:hover { opacity: 0.85; }
        .btn-primary { background: #fff; color: #000; }
        .btn-success { background: #1a7f37; color: #fff; }
        .btn-outline { background: transparent; border: 1px solid #333; color: #ccc; }
        .btn-danger { background: #da3633; color: #fff; }
        .btn-sm { padding: 6px 16px; font-size: 0.8rem; }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-badge.connected { background: #1a3a2a; color: #3fb950; }
        .status-badge.disconnected { background: #2a1a1a; color: #f85149; }

        .success-box {
            background: #0d1f0d;
            border: 1px solid #1a3a2a;
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            margin: 24px 0;
        }
        .success-box .check {
            width: 56px;
            height: 56px;
            background: #1a7f37;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 1.6rem;
        }
        .success-box h3 { color: #3fb950; margin-bottom: 8px; }
        .success-box p { color: #7ee787; margin-bottom: 0; }

        .error-box {
            background: #1f0d0d;
            border: 1px solid #3a1a1a;
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            margin: 24px 0;
        }
        .error-box h3 { color: #f85149; margin-bottom: 8px; }
        .error-box p { color: #ffa198; margin-bottom: 0; }

        .code-display {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 12px 16px;
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 0.85rem;
            color: #e6edf3;
            margin: 12px 0;
            word-break: break-all;
        }

        .features { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 24px; }
        .feature { background: #111; border: 1px solid #1a1a1a; border-radius: 8px; padding: 20px; }
        .feature h3 { margin-top: 0; color: #fff; font-size: 1rem; }
        .feature p { font-size: 0.9rem; margin-bottom: 0; }
        @media (max-width: 600px) { .features { grid-template-columns: 1fr; } }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .stat-card .number { font-size: 1.8rem; font-weight: 700; color: #fff; }
        .stat-card .label { font-size: 0.8rem; color: #666; margin-top: 4px; }
        @media (max-width: 600px) { .stats-row { grid-template-columns: 1fr; } }

        .schedule-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #1a1a1a;
        }
        .schedule-item:last-child { border-bottom: none; }
        .schedule-time {
            background: #161b22;
            border-radius: 6px;
            padding: 6px 12px;
            font-family: monospace;
            font-size: 0.85rem;
            color: #8b949e;
            min-width: 80px;
            text-align: center;
        }
        .schedule-desc { color: #aaa; font-size: 0.9rem; }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #333;
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ─── Post Page ──────────────────────────────────── */
        .creator-card {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px 20px;
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            margin-bottom: 24px;
        }
        .creator-card .creator-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .creator-card .creator-details .creator-handle { color: #fff; font-weight: 600; font-size: 0.95rem; }
        .creator-card .creator-details .creator-name { color: #888; font-size: 0.85rem; }

        .post-form .form-group { margin-bottom: 20px; }
        .post-form label {
            display: block;
            font-size: 0.85rem;
            color: #ccc;
            margin-bottom: 6px;
            font-weight: 500;
        }
        .post-form textarea {
            width: 100%;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 12px;
            color: #e6edf3;
            font-family: inherit;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 80px;
            line-height: 1.5;
        }
        .post-form textarea:focus { outline: none; border-color: #58a6ff; }
        .post-form select {
            width: 100%;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 10px 12px;
            color: #e6edf3;
            font-family: inherit;
            font-size: 0.9rem;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            cursor: pointer;
        }
        .post-form select:focus { outline: none; border-color: #58a6ff; }
        .post-form select option { background: #161b22; color: #e6edf3; }

        .video-preview {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            padding: 24px;
            text-align: center;
            margin-bottom: 24px;
        }
        .video-preview .preview-thumb {
            width: 140px;
            height: 248px;
            background: linear-gradient(145deg, #1a1a2e, #16213e, #0f3460);
            border-radius: 10px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        .video-preview .preview-thumb::after {
            content: '';
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(4px);
            position: absolute;
        }
        .video-preview .preview-thumb .play-icon {
            position: relative;
            z-index: 1;
            font-size: 1.4rem;
            color: rgba(255,255,255,0.9);
        }
        .video-preview .preview-label { color: #666; font-size: 0.8rem; }

        .checkbox-group { display: flex; flex-direction: column; gap: 10px; }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            color: #ccc;
            font-size: 0.9rem;
        }
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #58a6ff;
            cursor: pointer;
        }

        .toggle-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
        }
        .toggle-row .toggle-info .toggle-title { color: #ccc; font-size: 0.9rem; font-weight: 500; }
        .toggle-row .toggle-info .toggle-desc { color: #666; font-size: 0.8rem; margin-top: 2px; }
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            flex-shrink: 0;
        }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .toggle-switch .slider {
            position: absolute;
            inset: 0;
            background: #333;
            border-radius: 24px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .toggle-switch .slider::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            left: 3px;
            top: 3px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        .toggle-switch input:checked + .slider { background: #58a6ff; }
        .toggle-switch input:checked + .slider::before { transform: translateX(20px); }

        .commercial-sub {
            padding: 12px 16px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            margin-top: 10px;
        }

        .legal-text {
            font-size: 0.8rem;
            color: #666;
            margin: 20px 0;
            padding: 12px 16px;
            border-left: 2px solid #30363d;
        }
        .legal-text a { color: #58a6ff; text-decoration: none; }
        .legal-text a:hover { text-decoration: underline; }

        .btn-tiktok {
            background: #fe2c55;
            color: #fff;
            width: 100%;
            padding: 14px 24px;
            font-size: 1rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .processing-notice {
            background: #111;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            padding: 16px 20px;
            margin-top: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        .processing-notice .notice-icon { font-size: 1.1rem; flex-shrink: 0; margin-top: 2px; }
        .processing-notice .notice-text { color: #aaa; font-size: 0.85rem; line-height: 1.5; }

        .char-count { font-size: 0.75rem; color: #666; text-align: right; margin-top: 4px; }

        .interaction-note {
            display: none;
            margin-top: 10px;
            padding: 10px 12px;
            background: #1a1a2e;
            border: 1px solid #30363d;
            border-radius: 6px;
            font-size: 0.8rem;
            color: #8b949e;
        }
        .checkbox-label.disabled-by-privacy {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .checkbox-label.disabled-by-privacy input[type="checkbox"] {
            cursor: not-allowed;
        }
        .privacy-interaction-banner {
            display: none;
            margin-top: 12px;
            padding: 10px 14px;
            background: #16213e;
            border: 1px solid #30363d;
            border-radius: 8px;
            font-size: 0.82rem;
            color: #8b949e;
            line-height: 1.5;
        }
        .privacy-interaction-banner strong { color: #aaa; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Viral Shorts</h1>
            <p>Automated short-form video creation and publishing platform powered by AI.</p>
        </header>

        <nav>
            <a onclick="showPage('dashboard')" id="nav-dashboard" class="active">Dashboard</a>
            <a onclick="showPage('post')" id="nav-post">Post</a>
            <a onclick="showPage('about')" id="nav-about">About</a>
            <a onclick="showPage('privacy')" id="nav-privacy">Privacy Policy</a>
            <a onclick="showPage('terms')" id="nav-terms">Terms of Service</a>
        </nav>

        <!-- ═══ Dashboard ═══ -->
        <div id="page-dashboard" class="page active">

            <!-- OAuth callback states -->
            <div id="auth-success" style="display:none;">
                <section>
                    <div class="success-box">
                        <div class="check">&#10003;</div>
                        <h3>TikTok Account Connected</h3>
                        <p>Your TikTok account has been successfully authorized. Videos will now be published automatically.</p>
                    </div>
                    <p style="text-align:center; color:#666; font-size:0.85rem;">Authorization code received. You can close this window or continue to the dashboard.</p>
                    <div style="text-align:center; margin-top:16px;">
                        <button class="btn btn-outline btn-sm" onclick="dismissAuth()">Go to Dashboard</button>
                    </div>
                </section>
            </div>
            <div id="auth-error" style="display:none;">
                <section>
                    <div class="error-box">
                        <h3>Authorization Failed</h3>
                        <p id="auth-error-msg">An error occurred during authorization.</p>
                    </div>
                    <div style="text-align:center; margin-top:16px;">
                        <button class="btn btn-outline btn-sm" onclick="dismissAuth()">Back to Dashboard</button>
                    </div>
                </section>
            </div>

            <!-- Main dashboard (shown when no callback) -->
            <div id="dashboard-main">
                <section>
                    <h2>Publishing Dashboard</h2>

                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="number">6</div>
                            <div class="label">Videos / Day</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">3</div>
                            <div class="label">Platforms</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">2</div>
                            <div class="label">Runs / Day</div>
                        </div>
                    </div>

                    <div class="app-card">
                        <h3>Connected Platforms</h3>

                        <div class="platform-row">
                            <div class="platform-info">
                                <div class="platform-icon tiktok">
                                    <svg width="20" height="22" viewBox="0 0 20 22" fill="none"><path d="M14.67 0H11.08V15.02C11.08 16.69 9.72 18.05 8.04 18.05C6.36 18.05 5 16.69 5 15.02C5 13.38 6.33 12.05 7.95 12V8.43C4.39 8.48 1.5 11.4 1.5 15.02C1.5 18.67 4.45 21.59 8.08 21.59C11.71 21.59 14.67 18.64 14.67 15.02V7.3C16.04 8.3 17.72 8.88 19.5 8.91V5.34C16.83 5.24 14.67 2.86 14.67 0Z" fill="white"/></svg>
                                </div>
                                <div>
                                    <div class="platform-name">TikTok</div>
                                    <div class="platform-status" id="tiktok-status-text">Not connected</div>
                                </div>
                            </div>
                            <div id="tiktok-connect-area">
                                <button class="btn btn-primary btn-sm" id="tiktok-connect-btn" onclick="connectTikTok()">Connect Account</button>
                            </div>
                        </div>

                        <div class="platform-row">
                            <div class="platform-info">
                                <div class="platform-icon youtube">YT</div>
                                <div>
                                    <div class="platform-name">YouTube</div>
                                    <div class="platform-status">Connected via n8n</div>
                                </div>
                            </div>
                            <span class="status-badge connected">Connected</span>
                        </div>

                        <div class="platform-row">
                            <div class="platform-info">
                                <div class="platform-icon instagram">IG</div>
                                <div>
                                    <div class="platform-name">Instagram Reels</div>
                                    <div class="platform-status">Connected via Graph API</div>
                                </div>
                            </div>
                            <span class="status-badge connected">Connected</span>
                        </div>
                    </div>

                    <div class="app-card">
                        <h3>Publishing Schedule</h3>
                        <div class="schedule-item">
                            <div class="schedule-time">7:00 AM</div>
                            <div class="schedule-desc">Morning run &mdash; generates and publishes 3 shorts</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">4:00 PM</div>
                            <div class="schedule-desc">Afternoon run &mdash; generates and publishes 3 shorts</div>
                        </div>
                    </div>

                    <div class="app-card">
                        <h3>How It Works</h3>
                        <div class="features">
                            <div class="feature">
                                <h3>1. AI Script</h3>
                                <p>Trending stories are adapted into engaging short-form scripts with hooks.</p>
                            </div>
                            <div class="feature">
                                <h3>2. Voice + Visuals</h3>
                                <p>Natural voice narration and AI-generated cinematic scene images.</p>
                            </div>
                            <div class="feature">
                                <h3>3. Video Assembly</h3>
                                <p>Professional vertical videos assembled with subtitles and transitions.</p>
                            </div>
                            <div class="feature">
                                <h3>4. Auto Publish</h3>
                                <p>Videos uploaded automatically to TikTok, YouTube, and Instagram.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- ═══ Post to TikTok ═══ -->
        <div id="page-post" class="page">
            <section>
                <h2>Post to TikTok</h2>

                <!-- Post Form -->
                <div id="post-form-area">
                    <!-- Creator Info (Point 1: retrieved from creator_info API) -->
                    <div class="creator-card" id="creator-card">
                        <div class="creator-avatar">
                            <svg width="22" height="24" viewBox="0 0 20 22" fill="none"><path d="M14.67 0H11.08V15.02C11.08 16.69 9.72 18.05 8.04 18.05C6.36 18.05 5 16.69 5 15.02C5 13.38 6.33 12.05 7.95 12V8.43C4.39 8.48 1.5 11.4 1.5 15.02C1.5 18.67 4.45 21.59 8.08 21.59C11.71 21.59 14.67 18.64 14.67 15.02V7.3C16.04 8.3 17.72 8.88 19.5 8.91V5.34C16.83 5.24 14.67 2.86 14.67 0Z" fill="white"/></svg>
                        </div>
                        <div class="creator-details" id="creator-details">
                            <div class="creator-handle" id="creator-handle">
                                <span class="loading-spinner"></span> Loading account info...
                            </div>
                            <div class="creator-name" id="creator-name" style="color:#555;">Fetching from TikTok API</div>
                        </div>
                    </div>
                    <!-- Creator cannot post warning -->
                    <div id="creator-cannot-post" style="display:none; margin-bottom:16px; padding:12px 16px; background:#1f0d0d; border:1px solid #3a1a1a; border-radius:8px; font-size:0.85rem; color:#ffa198;">
                        Your account has reached its daily posting limit. Please try again later.
                    </div>

                    <!-- Video Upload & Preview -->
                    <div class="video-preview" id="video-upload-area">
                        <div id="video-dropzone" onclick="document.getElementById('video-file').click()" style="cursor:pointer;">
                            <div class="preview-thumb" id="preview-thumb-placeholder">
                                <span class="play-icon" style="font-size:2rem;">&#8679;</span>
                            </div>
                            <div class="preview-label">Click to select a video file (MP4)</div>
                        </div>
                        <video id="video-player" controls style="display:none; max-width:200px; max-height:356px; border-radius:10px; margin:0 auto 12px;"></video>
                        <div id="video-info" class="preview-label" style="display:none;"></div>
                        <input type="file" id="video-file" accept="video/mp4" style="display:none;" onchange="handleVideoSelect(event)">
                    </div>

                    <!-- Post Form -->
                    <div class="app-card post-form">
                        <!-- Title -->
                        <div class="form-group">
                            <label for="post-title">Title</label>
                            <textarea id="post-title" maxlength="150" placeholder="Write a title for your video..." oninput="updateCharCount()">The Vanishing Hitchhiker: A truck driver picks up a silent woman on a foggy highway — then she disappears. #scarystory #horror #urbanlegend</textarea>
                            <div class="char-count"><span id="title-char-count">0</span>/150</div>
                        </div>

                        <!-- Privacy Level -->
                        <div class="form-group">
                            <label for="post-privacy">Privacy Level</label>
                            <select id="post-privacy">
                                <option value="" disabled selected>Select privacy level</option>
                                <option value="PUBLIC_TO_EVERYONE">Public to Everyone</option>
                                <option value="MUTUAL_FOLLOW_FRIENDS">Mutual Follow Friends</option>
                                <option value="SELF_ONLY">Self Only</option>
                            </select>
                        </div>

                        <!-- Interaction Settings -->
                        <div class="form-group">
                            <label>Interaction Settings</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label" id="label-comments">
                                    <input type="checkbox" id="allow-comments"> Allow Comments
                                </label>
                                <label class="checkbox-label" id="label-duets">
                                    <input type="checkbox" id="allow-duets"> Allow Duets
                                </label>
                                <label class="checkbox-label" id="label-stitches">
                                    <input type="checkbox" id="allow-stitches"> Allow Stitches
                                </label>
                            </div>
                            <div class="privacy-interaction-banner" id="privacy-interaction-banner">
                                <strong>Privacy restriction:</strong> Duet and Stitch are not available for <em>Self Only</em> videos. To enable these interactions, change the privacy setting to <em>Public</em> or <em>Friends</em>.
                            </div>
                        </div>

                        <!-- AI-Generated Content Disclosure -->
                        <div class="form-group">
                            <div class="toggle-row">
                                <div class="toggle-info">
                                    <div class="toggle-title">AI-generated content</div>
                                    <div class="toggle-desc">This video contains AI-generated content (voice, visuals, or script)</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="aigc-toggle" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <!-- Commercial Content Disclosure (Point 3) -->
                        <div class="form-group">
                            <div class="toggle-row">
                                <div class="toggle-info">
                                    <div class="toggle-title">Disclose commercial content</div>
                                    <div class="toggle-desc">Turn on if this video promotes goods or services in exchange for something of value</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="commercial-toggle" onchange="toggleCommercial()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div id="commercial-sub-options" class="commercial-sub" style="display:none;">
                                <div class="checkbox-group">
                                    <div>
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="your-brand" onchange="updateCommercialState()"> Your Brand
                                        </label>
                                        <div id="your-brand-notice" style="display:none; margin: 4px 0 0 28px; font-size:0.8rem; color:#8b949e;">Your photo/video will be labeled as <strong style="color:#aaa;">"Promotional content"</strong></div>
                                    </div>
                                    <div>
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="branded-content" onchange="updateCommercialState()"> Branded Content
                                        </label>
                                        <div id="branded-content-notice" style="display:none; margin: 4px 0 0 28px; font-size:0.8rem; color:#8b949e;">Your photo/video will be labeled as <strong style="color:#aaa;">"Paid partnership"</strong></div>
                                    </div>
                                </div>
                                <!-- Shown when both are selected: only "Paid partnership" per guideline -->
                                <div id="both-selected-notice" style="display:none; margin-top:10px; padding:10px 12px; background:#1a1a2e; border-radius:6px; font-size:0.8rem; color:#8b949e;">Your photo/video will be labeled as <strong style="color:#aaa;">"Paid partnership"</strong></div>
                                <!-- Shown when nothing selected but toggle is on -->
                                <div id="commercial-none-warning" style="display:none; margin-top:8px; padding:10px 12px; background:#2a1a0a; border:1px solid #3a2a0a; border-radius:6px; font-size:0.8rem; color:#e3b341;">
                                    You need to indicate if your content promotes yourself, a third party, or both.
                                </div>
                                <div id="commercial-privacy-warning" style="display:none; margin-top:8px; padding:10px 12px; background:#2a1a1a; border:1px solid #3a2a2a; border-radius:6px; font-size:0.8rem; color:#ffa198;"></div>
                            </div>
                        </div>

                        <!-- Legal Declaration (dynamic) -->
                        <div class="legal-text" id="legal-declaration">
                            By posting, you agree to TikTok's <a href="https://www.tiktok.com/legal/music-usage-confirmation" target="_blank">Music Usage Confirmation</a>.
                        </div>

                        <!-- Post Button -->
                        <button class="btn btn-tiktok" id="post-submit-btn" onclick="submitPost()" disabled style="opacity:0.5; cursor:not-allowed;">
                            <svg width="18" height="20" viewBox="0 0 20 22" fill="none"><path d="M14.67 0H11.08V15.02C11.08 16.69 9.72 18.05 8.04 18.05C6.36 18.05 5 16.69 5 15.02C5 13.38 6.33 12.05 7.95 12V8.43C4.39 8.48 1.5 11.4 1.5 15.02C1.5 18.67 4.45 21.59 8.08 21.59C11.71 21.59 14.67 18.64 14.67 15.02V7.3C16.04 8.3 17.72 8.88 19.5 8.91V5.34C16.83 5.24 14.67 2.86 14.67 0Z" fill="white"/></svg>
                            Post to TikTok
                        </button>
                    </div>
                </div>

                <!-- Post Success State -->
                <div id="post-success" style="display:none;">
                    <div class="success-box">
                        <div class="check">&#10003;</div>
                        <h3>Video Submitted to TikTok</h3>
                        <p>Your video has been uploaded and is now being processed.</p>
                    </div>
                    <div class="processing-notice">
                        <span class="notice-icon">&#8987;</span>
                        <span class="notice-text">Your video is being processed by TikTok. It may take a few minutes before it appears on your profile. You will receive a notification once it is published.</span>
                    </div>
                    <div style="text-align:center; margin-top:24px;">
                        <button class="btn btn-outline btn-sm" onclick="resetPostForm()">Post Another Video</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- ═══ About ═══ -->
        <div id="page-about" class="page">
            <section>
                <h2>About Viral Shorts</h2>
                <p>Viral Shorts is an automated content creation tool that generates short-form videos and publishes them to social media platforms including YouTube, TikTok, and Instagram.</p>
                <p>The application uses AI to adapt trending stories into engaging scripts, generates natural voice narration, creates cinematic visuals, and assembles professional vertical videos — all without manual intervention.</p>

                <div class="features">
                    <div class="feature">
                        <h3>AI Script Generation</h3>
                        <p>Trending stories are adapted into engaging short-form scripts with hooks and dramatic structure.</p>
                    </div>
                    <div class="feature">
                        <h3>Voice Narration</h3>
                        <p>Natural-sounding text-to-speech narration with word-level subtitle synchronization.</p>
                    </div>
                    <div class="feature">
                        <h3>AI Visuals</h3>
                        <p>Cinematic scene images generated by AI to illustrate each story segment.</p>
                    </div>
                    <div class="feature">
                        <h3>Auto Publishing</h3>
                        <p>Finished videos are automatically uploaded to YouTube, TikTok, and Instagram with optimized metadata.</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- ═══ Privacy Policy ═══ -->
        <div id="page-privacy" class="page">
            <section>
                <h2>Privacy Policy</h2>
                <p><strong>Last updated:</strong> February 11, 2026</p>

                <h3>1. Introduction</h3>
                <p>Viral Shorts ("we", "our", or "the app") respects your privacy. This Privacy Policy explains how we collect, use, and protect information when you use our application and services.</p>

                <h3>2. Information We Collect</h3>
                <p>Viral Shorts collects only the minimum information required to operate:</p>
                <ul>
                    <li><strong>OAuth Tokens:</strong> When you authorize the app to post on your behalf (e.g., TikTok, YouTube), we store authentication tokens locally on our secure server. These tokens are used solely to publish content to your account.</li>
                    <li><strong>Public Content Data:</strong> We access publicly available content from platforms like Reddit to generate video scripts. No private or personal user data is collected from these sources.</li>
                </ul>
                <p>We do <strong>not</strong> collect personal information such as names, email addresses, IP addresses, or browsing history from end users.</p>

                <h3>3. How We Use Information</h3>
                <ul>
                    <li>To authenticate with social media platforms and publish videos on the authorized account.</li>
                    <li>To generate and assemble video content automatically.</li>
                </ul>

                <h3>4. Data Storage and Security</h3>
                <p>All authentication tokens are stored locally on a private, secured server. Tokens are never shared with third parties, sold, or used for any purpose other than publishing content to the authorized account. We use industry-standard security practices to protect stored data.</p>

                <h3>5. Third-Party Services</h3>
                <p>Viral Shorts integrates with the following third-party services:</p>
                <ul>
                    <li><strong>TikTok Content Posting API:</strong> Used to publish videos to the authorized TikTok account. Subject to <a href="https://www.tiktok.com/legal/terms-of-service" target="_blank">TikTok's Terms of Service</a>.</li>
                    <li><strong>YouTube Data API:</strong> Used to upload videos. Subject to <a href="https://www.youtube.com/t/terms" target="_blank">YouTube's Terms of Service</a> and <a href="https://policies.google.com/privacy" target="_blank">Google's Privacy Policy</a>.</li>
                    <li><strong>Instagram Graph API:</strong> Used to publish Reels. Subject to <a href="https://www.facebook.com/terms.php" target="_blank">Meta's Terms of Service</a>.</li>
                </ul>

                <h3>6. Data Retention and Deletion</h3>
                <p>Authentication tokens are retained only as long as necessary for the app to function. You may revoke access at any time by removing the app's authorization from your TikTok or YouTube account settings. Upon revocation, stored tokens become invalid and are deleted from our server.</p>

                <h3>7. Children's Privacy</h3>
                <p>Viral Shorts is not intended for use by individuals under the age of 13. We do not knowingly collect information from children.</p>

                <h3>8. Changes to This Policy</h3>
                <p>We may update this Privacy Policy from time to time. Changes will be posted on this page with an updated revision date.</p>

                <h3>9. Contact</h3>
                <p>If you have questions about this Privacy Policy, you may reach us through our GitHub repository.</p>
            </section>
        </div>

        <!-- ═══ Terms of Service ═══ -->
        <div id="page-terms" class="page">
            <section>
                <h2>Terms of Service</h2>
                <p><strong>Last updated:</strong> February 11, 2026</p>

                <h3>1. Acceptance of Terms</h3>
                <p>By using Viral Shorts ("the app"), you agree to be bound by these Terms of Service. If you do not agree, do not use the app.</p>

                <h3>2. Description of Service</h3>
                <p>Viral Shorts is an automated content creation and publishing tool. It generates short-form video content using AI and publishes it to social media platforms on behalf of the authorized user.</p>

                <h3>3. User Responsibilities</h3>
                <ul>
                    <li>You must have the authority to grant the app access to your social media accounts.</li>
                    <li>You are responsible for the content published to your accounts through the app.</li>
                    <li>You agree not to use the app for any unlawful purpose or in violation of any platform's terms of service.</li>
                    <li>You must comply with all applicable laws and regulations regarding content creation and distribution.</li>
                </ul>

                <h3>4. Content and Intellectual Property</h3>
                <p>Videos generated by the app are created using AI-generated scripts, AI-generated images, and synthesized voice narration. The app does not claim ownership over content published to your accounts. You are responsible for ensuring that published content does not infringe on any third-party rights.</p>

                <h3>5. API Usage</h3>
                <p>The app accesses third-party APIs (TikTok, YouTube, Instagram) in accordance with their respective developer terms and policies. Continued use of the app is subject to the availability and terms of these third-party services.</p>

                <h3>6. Disclaimer of Warranties</h3>
                <p>The app is provided "as is" without warranty of any kind, express or implied. We do not guarantee uninterrupted service, error-free operation, or any specific results from using the app.</p>

                <h3>7. Limitation of Liability</h3>
                <p>To the fullest extent permitted by law, Viral Shorts and its operators shall not be liable for any indirect, incidental, special, or consequential damages arising from your use of the app.</p>

                <h3>8. Termination</h3>
                <p>We reserve the right to suspend or terminate access to the app at any time, for any reason, without notice.</p>

                <h3>9. Changes to Terms</h3>
                <p>We may modify these Terms of Service at any time. Continued use of the app after changes constitutes acceptance of the updated terms.</p>

                <h3>10. Contact</h3>
                <p>For questions about these Terms of Service, you may reach us through our GitHub repository.</p>
            </section>
        </div>

        <footer>
            <p>&copy; 2026 Viral Shorts. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // ─── Configuration ───────────────────────────────
        const CLIENT_KEY = 'awxtj46z4b0gfvsg';
        const REDIRECT_URI = 'https://avarajar.github.io/viral-shorts/';
        const AUTH_URL = 'https://www.tiktok.com/v2/auth/authorize/';

        // ─── Page Navigation ─────────────────────────────
        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            document.getElementById('nav-' + page).classList.add('active');
            // Point 1: retrieve latest creator info when rendering the Post page
            if (page === 'post') {
                creatorInfo = null;
                loadCreatorInfo();
            }
        }

        // ─── TikTok OAuth ────────────────────────────────
        function generateState() {
            const arr = new Uint8Array(16);
            crypto.getRandomValues(arr);
            return Array.from(arr, b => b.toString(16).padStart(2, '0')).join('');
        }

        function connectTikTok() {
            const state = generateState();
            sessionStorage.setItem('tiktok_oauth_state', state);

            const params = new URLSearchParams({
                client_key: CLIENT_KEY,
                response_type: 'code',
                scope: 'video.publish',
                redirect_uri: REDIRECT_URI,
                state: state,
            });

            window.location.href = AUTH_URL + '?' + params.toString();
        }

        function disconnectTikTok() {
            sessionStorage.removeItem('tiktok_connected');
            updateTikTokUI(false);
        }

        function updateTikTokUI(connected) {
            const statusText = document.getElementById('tiktok-status-text');
            const connectArea = document.getElementById('tiktok-connect-area');

            if (connected) {
                statusText.textContent = 'Connected — auto-publishing enabled';
                connectArea.innerHTML = '<span class="status-badge connected">Connected</span> <button class="btn btn-outline btn-sm" style="margin-left:8px;" onclick="disconnectTikTok()">Disconnect</button>';
            } else {
                statusText.textContent = 'Not connected';
                connectArea.innerHTML = '<button class="btn btn-primary btn-sm" onclick="connectTikTok()">Connect Account</button>';
            }
        }

        function dismissAuth() {
            // Clean URL
            window.history.replaceState({}, '', window.location.pathname);
            document.getElementById('auth-success').style.display = 'none';
            document.getElementById('auth-error').style.display = 'none';
            document.getElementById('dashboard-main').style.display = 'block';
        }

        // ─── Handle OAuth Callback ───────────────────────
        function handleCallback() {
            const params = new URLSearchParams(window.location.search);
            const code = params.get('code');
            const error = params.get('error');
            const errorDesc = params.get('error_description');

            if (code) {
                // Success: authorization code received
                document.getElementById('dashboard-main').style.display = 'none';
                document.getElementById('auth-success').style.display = 'block';
                sessionStorage.setItem('tiktok_connected', 'true');
                updateTikTokUI(true);
                return;
            }

            if (error) {
                // Error from TikTok
                document.getElementById('dashboard-main').style.display = 'none';
                document.getElementById('auth-error').style.display = 'block';
                document.getElementById('auth-error-msg').textContent = errorDesc || error;
                return;
            }

            // No callback params — show normal dashboard
            if (sessionStorage.getItem('tiktok_connected') === 'true') {
                updateTikTokUI(true);
            }
        }

        // ─── Creator Info (Point 1) ──────────────────────
        // Simulates fetching creator info from creator_info API.
        // In production this calls: POST /v2/post/publish/creator_info/query/
        let creatorInfo = null;

        function loadCreatorInfo() {
            const handleEl = document.getElementById('creator-handle');
            const nameEl = document.getElementById('creator-name');
            const postForm = document.getElementById('post-form-area');
            const cannotPostEl = document.getElementById('creator-cannot-post');

            // Show loading state
            handleEl.innerHTML = '<span class="loading-spinner"></span> Loading account info...';
            nameEl.style.color = '#555';
            nameEl.textContent = 'Fetching from TikTok API';

            // Simulate API call to creator_info endpoint
            setTimeout(function() {
                // Simulated creator_info API response
                creatorInfo = {
                    nickname: 'Ashen Tales',
                    display_name: '@joseantonioandrad530',
                    can_post: true,
                    max_video_post_duration_sec: 600,
                    privacy_level_options: ['SELF_ONLY'],  // SELF_ONLY only during review
                    comment_disabled: false,
                    duet_disabled: true,   // restricted by creator settings
                    stitch_disabled: true, // restricted by creator settings
                };

                if (!creatorInfo.can_post) {
                    cannotPostEl.style.display = 'block';
                    postForm.style.pointerEvents = 'none';
                    postForm.style.opacity = '0.5';
                    return;
                }

                // Populate creator display
                handleEl.textContent = creatorInfo.display_name;
                nameEl.textContent = creatorInfo.nickname;
                nameEl.style.color = '';

                // Populate privacy dropdown from API options
                const privacySelect = document.getElementById('post-privacy');
                privacySelect.innerHTML = '<option value="" disabled selected>Select privacy level</option>';
                const privacyLabels = {
                    'PUBLIC_TO_EVERYONE': 'Public to Everyone',
                    'MUTUAL_FOLLOW_FRIENDS': 'Mutual Follow Friends',
                    'SELF_ONLY': 'Self Only'
                };
                creatorInfo.privacy_level_options.forEach(function(level) {
                    const opt = document.createElement('option');
                    opt.value = level;
                    opt.textContent = privacyLabels[level] || level;
                    privacySelect.appendChild(opt);
                });

                // Apply creator_info interaction restrictions
                applyCreatorInfoRestrictions();

                validateForm();
            }, 1200);
        }

        function applyCreatorInfoRestrictions() {
            if (!creatorInfo) return;

            const duetCheckbox = document.getElementById('allow-duets');
            const stitchCheckbox = document.getElementById('allow-stitches');
            const labelDuets = document.getElementById('label-duets');
            const labelStitches = document.getElementById('label-stitches');

            if (creatorInfo.duet_disabled) {
                duetCheckbox.disabled = true;
                duetCheckbox.checked = false;
                labelDuets.classList.add('disabled-by-privacy');
            }
            if (creatorInfo.stitch_disabled) {
                stitchCheckbox.disabled = true;
                stitchCheckbox.checked = false;
                labelStitches.classList.add('disabled-by-privacy');
            }
        }

        // ─── Post Form ──────────────────────────────────
        let selectedVideoFile = null;

        function updateCharCount() {
            const textarea = document.getElementById('post-title');
            document.getElementById('title-char-count').textContent = textarea.value.length;
            validateForm();
        }

        function handleVideoSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.type.startsWith('video/')) {
                alert('Please select a valid video file (MP4).');
                return;
            }

            selectedVideoFile = file;
            const player = document.getElementById('video-player');
            const placeholder = document.getElementById('preview-thumb-placeholder');
            const dropzone = document.getElementById('video-dropzone');
            const infoEl = document.getElementById('video-info');

            const url = URL.createObjectURL(file);
            player.src = url;
            player.style.display = 'block';
            dropzone.style.display = 'none';
            infoEl.style.display = 'block';

            player.onloadedmetadata = function() {
                const dur = Math.floor(player.duration);
                const mins = Math.floor(dur / 60);
                const secs = dur % 60;
                const sizeMB = (file.size / 1024 / 1024).toFixed(1);
                infoEl.textContent = file.name + ' \u2014 ' + mins + ':' + String(secs).padStart(2, '0') + ' \u2014 ' + sizeMB + ' MB';
                validateForm();
            };
        }

        function updateInteractionBasedOnPrivacy() {
            const privacy = document.getElementById('post-privacy').value;
            const duetCheckbox = document.getElementById('allow-duets');
            const stitchCheckbox = document.getElementById('allow-stitches');
            const labelDuets = document.getElementById('label-duets');
            const labelStitches = document.getElementById('label-stitches');
            const banner = document.getElementById('privacy-interaction-banner');

            const isSelfOnly = privacy === 'SELF_ONLY';
            // Also respect creator_info API restrictions
            const creatorDuetDisabled = creatorInfo && creatorInfo.duet_disabled;
            const creatorStitchDisabled = creatorInfo && creatorInfo.stitch_disabled;

            const duetDisabled = isSelfOnly || creatorDuetDisabled;
            const stitchDisabled = isSelfOnly || creatorStitchDisabled;

            duetCheckbox.disabled = duetDisabled;
            stitchCheckbox.disabled = stitchDisabled;

            if (duetDisabled) {
                duetCheckbox.checked = false;
                labelDuets.classList.add('disabled-by-privacy');
            } else {
                labelDuets.classList.remove('disabled-by-privacy');
            }

            if (stitchDisabled) {
                stitchCheckbox.checked = false;
                labelStitches.classList.add('disabled-by-privacy');
            } else {
                labelStitches.classList.remove('disabled-by-privacy');
            }

            // Show explanation banner for SELF_ONLY privacy restriction
            if (isSelfOnly) {
                banner.style.display = 'block';
            } else if (creatorDuetDisabled || creatorStitchDisabled) {
                banner.innerHTML = '<strong>Account restriction:</strong> Some interactions have been disabled based on your TikTok account settings.';
                banner.style.display = 'block';
            } else {
                banner.style.display = 'none';
            }
        }

        function toggleCommercial() {
            const sub = document.getElementById('commercial-sub-options');
            const toggle = document.getElementById('commercial-toggle');
            sub.style.display = toggle.checked ? 'block' : 'none';
            if (!toggle.checked) {
                document.getElementById('your-brand').checked = false;
                document.getElementById('branded-content').checked = false;
            }
            updateCommercialState();
        }

        function updateCommercialState() {
            const commercialOn = document.getElementById('commercial-toggle').checked;
            const yourBrand = document.getElementById('your-brand').checked;
            const brandedContent = document.getElementById('branded-content').checked;
            const privacySelect = document.getElementById('post-privacy');
            const selfOnlyOption = privacySelect.querySelector('option[value="SELF_ONLY"]');
            const yourBrandNotice = document.getElementById('your-brand-notice');
            const brandedContentNotice = document.getElementById('branded-content-notice');
            const privacyWarning = document.getElementById('commercial-privacy-warning');
            const legalEl = document.getElementById('legal-declaration');

            const bothSelectedNotice = document.getElementById('both-selected-notice');
            const noneWarning = document.getElementById('commercial-none-warning');

            // Reset
            yourBrandNotice.style.display = 'none';
            brandedContentNotice.style.display = 'none';
            bothSelectedNotice.style.display = 'none';
            noneWarning.style.display = 'none';
            privacyWarning.style.display = 'none';
            if (selfOnlyOption) selfOnlyOption.disabled = false;

            if (commercialOn) {
                if (yourBrand && brandedContent) {
                    // Both selected: per guideline, show only "Paid partnership"
                    bothSelectedNotice.style.display = 'block';
                } else if (yourBrand) {
                    yourBrandNotice.style.display = 'block';
                } else if (brandedContent) {
                    brandedContentNotice.style.display = 'block';
                } else {
                    // Nothing selected: show the required warning message
                    noneWarning.style.display = 'block';
                }

                // Branded content cannot be SELF_ONLY
                if (brandedContent) {
                    if (selfOnlyOption) selfOnlyOption.disabled = true;
                    if (privacySelect.value === 'SELF_ONLY') {
                        privacySelect.value = '';
                        updateInteractionBasedOnPrivacy();
                        privacyWarning.textContent = 'Branded content cannot be set to "Self Only". Please select a different privacy level.';
                        privacyWarning.style.display = 'block';
                    }
                }

                // Update legal text based on selections (Point 4)
                if (brandedContent) {
                    legalEl.innerHTML = 'By posting, you agree to TikTok\'s <a href="https://www.tiktok.com/legal/page/global/bc-policy" target="_blank">Branded Content Policy</a> and <a href="https://www.tiktok.com/legal/music-usage-confirmation" target="_blank">Music Usage Confirmation</a>.';
                } else {
                    legalEl.innerHTML = 'By posting, you agree to TikTok\'s <a href="https://www.tiktok.com/legal/music-usage-confirmation" target="_blank">Music Usage Confirmation</a>.';
                }
            } else {
                // Default legal text (Point 4)
                legalEl.innerHTML = 'By posting, you agree to TikTok\'s <a href="https://www.tiktok.com/legal/music-usage-confirmation" target="_blank">Music Usage Confirmation</a>.';
            }

            validateForm();
        }

        function validateForm() {
            const btn = document.getElementById('post-submit-btn');
            const title = document.getElementById('post-title').value.trim();
            const privacy = document.getElementById('post-privacy').value;
            const commercialOn = document.getElementById('commercial-toggle').checked;
            const yourBrand = document.getElementById('your-brand').checked;
            const brandedContent = document.getElementById('branded-content').checked;

            let valid = true;

            if (!selectedVideoFile) valid = false;
            if (!title) valid = false;
            if (!privacy) valid = false;

            // If commercial toggle is on, at least one sub-option must be selected
            if (commercialOn && !yourBrand && !brandedContent) valid = false;

            btn.disabled = !valid;
            btn.style.opacity = valid ? '1' : '0.5';
            btn.style.cursor = valid ? 'pointer' : 'not-allowed';
        }

        function submitPost() {
            const btn = document.getElementById('post-submit-btn');
            if (btn.disabled) return;

            const title = document.getElementById('post-title').value.trim();
            const privacy = document.getElementById('post-privacy').value;
            const commercialOn = document.getElementById('commercial-toggle').checked;
            const yourBrand = document.getElementById('your-brand').checked;
            const brandedContent = document.getElementById('branded-content').checked;

            // Final validations
            if (!selectedVideoFile) { alert('Please select a video file.'); return; }
            if (!title) { alert('Please enter a title for your video.'); return; }
            if (!privacy) { alert('Please select a privacy level.'); return; }
            if (commercialOn && !yourBrand && !brandedContent) {
                alert('Please select at least one commercial content option (Your Brand or Branded Content).');
                return;
            }

            // Build post summary
            const aigc = document.getElementById('aigc-toggle').checked;
            const postData = {
                title: title,
                privacy_level: privacy,
                disable_comment: !document.getElementById('allow-comments').checked,
                disable_duet: !document.getElementById('allow-duets').checked,
                disable_stitch: !document.getElementById('allow-stitches').checked,
                is_aigc: aigc,
                brand_organic_toggle: commercialOn && yourBrand,
                brand_content_toggle: commercialOn && brandedContent,
                video_file: selectedVideoFile.name,
                video_size: selectedVideoFile.size,
            };

            console.log('[TikTok Post] Submitting with params:', postData);

            document.getElementById('post-form-area').style.display = 'none';
            document.getElementById('post-success').style.display = 'block';
        }

        function resetPostForm() {
            selectedVideoFile = null;
            document.getElementById('post-form-area').style.display = 'block';
            document.getElementById('post-success').style.display = 'none';
            document.getElementById('post-privacy').selectedIndex = 0;
            document.getElementById('allow-comments').checked = false;
            document.getElementById('allow-duets').checked = false;
            document.getElementById('allow-stitches').checked = false;
            document.getElementById('aigc-toggle').checked = true;
            document.getElementById('commercial-toggle').checked = false;
            document.getElementById('video-file').value = '';
            document.getElementById('video-player').style.display = 'none';
            document.getElementById('video-player').src = '';
            document.getElementById('video-dropzone').style.display = 'block';
            document.getElementById('video-info').style.display = 'none';
            document.getElementById('your-brand-notice').style.display = 'none';
            document.getElementById('branded-content-notice').style.display = 'none';
            document.getElementById('both-selected-notice').style.display = 'none';
            document.getElementById('commercial-none-warning').style.display = 'none';
            document.getElementById('privacy-interaction-banner').style.display = 'none';
            document.getElementById('creator-cannot-post').style.display = 'none';
            toggleCommercial();
            updateInteractionBasedOnPrivacy();
            validateForm();
        }

        // ─── Init ────────────────────────────────────────
        handleCallback();
        updateCharCount();
        document.getElementById('post-privacy').addEventListener('change', function() {
            updateInteractionBasedOnPrivacy();
            updateCommercialState();
            validateForm();
        });
        // If page loads directly on the post tab, load creator info
        if (document.getElementById('page-post').classList.contains('active')) {
            loadCreatorInfo();
        }
    </script>
</body>
</html>
